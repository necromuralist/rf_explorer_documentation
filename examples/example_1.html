<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>RF-Explorer Example One - Max Value &#8212; RF-Explorer Explorations 2017.10.02.a documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tuna.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/mr_pipo_waves_small.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example Two - Frequency Sub-ranges" href="example_2.html" />
    <link rel="prev" title="Examples" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>
  
  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          RF-Explorer Explorations</a>
        <span class="navbar-text navbar-version pull-left"><b>2017.10.02</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rfexplorer/index.html">RF-Explorer API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">RF-Explorer Example One - Max Value</a><ul>
<li><a class="reference internal" href="#description">1 Description</a></li>
<li><a class="reference internal" href="#tangle">2 Tangle</a></li>
<li><a class="reference internal" href="#imports">3 Imports</a></li>
<li><a class="reference internal" href="#print-peak">4 Print Peak</a><ul>
<li><a class="reference internal" href="#line-formats">4.1 Line Formats</a></li>
<li><a class="reference internal" href="#the-function-declaration">4.2 The Function Declaration</a></li>
<li><a class="reference internal" href="#get-the-data">4.3 Get The Data</a></li>
<li><a class="reference internal" href="#get-the-peak-data">4.4 Get The Peak Data</a><ul>
<li><a class="reference internal" href="#the-index">4.4.1 The Index</a></li>
<li><a class="reference internal" href="#the-amplitude">4.4.2 The Amplitude</a></li>
<li><a class="reference internal" href="#peak-frequency">4.4.3 Peak Frequency</a></li>
<li><a class="reference internal" href="#output">4.4.4 Output</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#communicator-exception">5 Communicator Exception</a></li>
<li><a class="reference internal" href="#the-communicator">6 The Communicator</a><ul>
<li><a class="reference internal" href="#the-rfe-instance">6.1 The RFE Instance</a></li>
<li><a class="reference internal" href="#context-management">6.2 Context Management</a></li>
<li><a class="reference internal" href="#the-set-up-method">6.3 The <code class="docutils literal notranslate"><span class="pre">set_up</span></code> Method</a><ul>
<li><a class="reference internal" href="#get-the-ports">6.3.1 Get the ports</a></li>
<li><a class="reference internal" href="#connect-to-the-rfexplorer">6.3.2 Connect to the RFExplorer</a></li>
<li><a class="reference internal" href="#reset-the-device">6.3.3 Reset The Device</a></li>
<li><a class="reference internal" href="#the-model-and-configuration">6.3.4 The Model And Configuration</a></li>
<li><a class="reference internal" href="#analyzer-check">6.3.5 Analyzer Check</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-main-processing-loop">7 The Main processing loop</a><ul>
<li><a class="reference internal" href="#setup-the-communicator">7.1 Setup the Communicator</a></li>
<li><a class="reference internal" href="#setup-the-loop">7.2 Setup the Loop</a></li>
<li><a class="reference internal" href="#process-string">7.3 Process String</a></li>
<li><a class="reference internal" href="#print-the-data">7.4 Print The Data</a></li>
<li><a class="reference internal" href="#end-main">7.5 End Main</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-argument-parser">8 The Argument Parser</a><ul>
<li><a class="reference internal" href="#serial-port">8.1 Serial Port</a></li>
<li><a class="reference internal" href="#baud-rate">8.2 Baud Rate</a></li>
<li><a class="reference internal" href="#run-time">8.3 Run-Time</a></li>
<li><a class="reference internal" href="#csv-data">8.4 CSV Data</a></li>
<li><a class="reference internal" href="#return-the-parser">8.5 Return The parser</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-executable-block">9 The Executable Block</a></li>
<li><a class="reference internal" href="#sample-output">10 Sample output</a><ul>
<li><a class="reference internal" href="#default">10.1 Default</a></li>
<li><a class="reference internal" href="#csv">10.2 CSV</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="index.html" title="Previous Chapter: Examples"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Examples</span>
    </a>
  </li>
  <li>
    <a href="example_2.html" title="Next Chapter: Example Two - Frequency Sub-ranges"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Example Two -... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/examples/example_1.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

  
  
  <div id="main-content" class="container">
    <div class="row">
      <div class="col-md-12 content">
        
  <div class="section" id="rf-explorer-example-one-max-value">
<h1><a class="toc-backref" href="#id1">RF-Explorer Example One - Max Value</a><a class="headerlink" href="#rf-explorer-example-one-max-value" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">hades</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#rf-explorer-example-one-max-value" id="id1">RF-Explorer Example One - Max Value</a><ul>
<li><a class="reference internal" href="#description" id="id2">1 Description</a></li>
<li><a class="reference internal" href="#tangle" id="id3">2 Tangle</a></li>
<li><a class="reference internal" href="#imports" id="id4">3 Imports</a></li>
<li><a class="reference internal" href="#print-peak" id="id5">4 Print Peak</a><ul>
<li><a class="reference internal" href="#line-formats" id="id6">4.1 Line Formats</a></li>
<li><a class="reference internal" href="#the-function-declaration" id="id7">4.2 The Function Declaration</a></li>
<li><a class="reference internal" href="#get-the-data" id="id8">4.3 Get The Data</a></li>
<li><a class="reference internal" href="#get-the-peak-data" id="id9">4.4 Get The Peak Data</a><ul>
<li><a class="reference internal" href="#the-index" id="id10">4.4.1 The Index</a></li>
<li><a class="reference internal" href="#the-amplitude" id="id11">4.4.2 The Amplitude</a></li>
<li><a class="reference internal" href="#peak-frequency" id="id12">4.4.3 Peak Frequency</a></li>
<li><a class="reference internal" href="#output" id="id13">4.4.4 Output</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#communicator-exception" id="id14">5 Communicator Exception</a></li>
<li><a class="reference internal" href="#the-communicator" id="id15">6 The Communicator</a><ul>
<li><a class="reference internal" href="#the-rfe-instance" id="id16">6.1 The RFE Instance</a></li>
<li><a class="reference internal" href="#context-management" id="id17">6.2 Context Management</a></li>
<li><a class="reference internal" href="#the-set-up-method" id="id18">6.3 The <code class="docutils literal notranslate"><span class="pre">set_up</span></code> Method</a><ul>
<li><a class="reference internal" href="#get-the-ports" id="id19">6.3.1 Get the ports</a></li>
<li><a class="reference internal" href="#connect-to-the-rfexplorer" id="id20">6.3.2 Connect to the RFExplorer</a></li>
<li><a class="reference internal" href="#reset-the-device" id="id21">6.3.3 Reset The Device</a></li>
<li><a class="reference internal" href="#the-model-and-configuration" id="id22">6.3.4 The Model And Configuration</a></li>
<li><a class="reference internal" href="#analyzer-check" id="id23">6.3.5 Analyzer Check</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-main-processing-loop" id="id24">7 The Main processing loop</a><ul>
<li><a class="reference internal" href="#setup-the-communicator" id="id25">7.1 Setup the Communicator</a></li>
<li><a class="reference internal" href="#setup-the-loop" id="id26">7.2 Setup the Loop</a></li>
<li><a class="reference internal" href="#process-string" id="id27">7.3 Process String</a></li>
<li><a class="reference internal" href="#print-the-data" id="id28">7.4 Print The Data</a></li>
<li><a class="reference internal" href="#end-main" id="id29">7.5 End Main</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-argument-parser" id="id30">8 The Argument Parser</a><ul>
<li><a class="reference internal" href="#serial-port" id="id31">8.1 Serial Port</a></li>
<li><a class="reference internal" href="#baud-rate" id="id32">8.2 Baud Rate</a></li>
<li><a class="reference internal" href="#run-time" id="id33">8.3 Run-Time</a></li>
<li><a class="reference internal" href="#csv-data" id="id34">8.4 CSV Data</a></li>
<li><a class="reference internal" href="#return-the-parser" id="id35">8.5 Return The parser</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-executable-block" id="id36">9 The Executable Block</a></li>
<li><a class="reference internal" href="#sample-output" id="id37">10 Sample output</a><ul>
<li><a class="reference internal" href="#default" id="id38">10.1 Default</a></li>
<li><a class="reference internal" href="#csv" id="id39">10.2 CSV</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id2">1 Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This is the first example that comes with the <code class="docutils literal notranslate"><span class="pre">RFExplorer</span></code> repository.
It will display the amplitude (in dBm) and the frequency (in MHz) of the maximum value in the sweep data. The <em>sweep</em> is one sweep from the lowest to the highest frequency. It is made up of indiviual <em>steps</em>.</p>
<p>The amount of stored sweep data is controlled by the length of time that it scans. By default, it samples ten times a second, so if you are comparing it to something that reports less frequently, you will need to aggregate it somehow.</p>
</div>
<div class="section" id="tangle">
<h2><a class="toc-backref" href="#id3">2 Tangle</a><a class="headerlink" href="#tangle" title="Permalink to this headline">¶</a></h2>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;&lt;</span><span class="n">imports</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">line</span><span class="o">-</span><span class="n">formats</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="nb">print</span><span class="o">-</span><span class="n">peak</span><span class="o">&gt;&gt;</span>
<span class="o">&lt;&lt;</span><span class="n">get</span><span class="o">-</span><span class="n">data</span><span class="o">&gt;&gt;</span>
<span class="o">&lt;&lt;</span><span class="n">get</span><span class="o">-</span><span class="n">peak</span><span class="o">-</span><span class="n">step</span><span class="o">&gt;&gt;</span>
<span class="o">&lt;&lt;</span><span class="n">get</span><span class="o">-</span><span class="n">peak</span><span class="o">-</span><span class="n">amplitude</span><span class="o">&gt;&gt;</span>
<span class="o">&lt;&lt;</span><span class="n">get</span><span class="o">-</span><span class="n">peak</span><span class="o">-</span><span class="n">frequency</span><span class="o">&gt;&gt;</span>
<span class="o">&lt;&lt;</span><span class="n">get</span><span class="o">-</span><span class="n">peak</span><span class="o">-</span><span class="n">data</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="k">global</span><span class="o">-</span><span class="n">variables</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">communicator</span><span class="o">-</span><span class="n">exception</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">communicator</span><span class="o">&gt;&gt;</span>

    <span class="o">&lt;&lt;</span><span class="n">rfe</span><span class="o">-</span><span class="nb">property</span><span class="o">&gt;&gt;</span>

    <span class="o">&lt;&lt;</span><span class="n">context</span><span class="o">-</span><span class="n">management</span><span class="o">&gt;&gt;</span>

    <span class="o">&lt;&lt;</span><span class="n">communicator</span><span class="o">-</span><span class="n">setup</span><span class="o">&gt;&gt;</span>
        <span class="o">&lt;&lt;</span><span class="n">get</span><span class="o">-</span><span class="n">ports</span><span class="o">&gt;&gt;</span>

        <span class="o">&lt;&lt;</span><span class="n">connect</span><span class="o">-</span><span class="n">port</span><span class="o">&gt;&gt;</span>

        <span class="o">&lt;&lt;</span><span class="n">reset</span><span class="o">-</span><span class="n">explorer</span><span class="o">&gt;&gt;</span>

        <span class="o">&lt;&lt;</span><span class="n">get</span><span class="o">-</span><span class="n">model</span><span class="o">&gt;&gt;</span>

        <span class="o">&lt;&lt;</span><span class="n">analyzer</span><span class="o">-</span><span class="n">check</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">main</span><span class="o">&gt;&gt;</span>
        <span class="o">&lt;&lt;</span><span class="n">setup</span><span class="o">-</span><span class="n">communicator</span><span class="o">&gt;&gt;</span>
        <span class="o">&lt;&lt;</span><span class="n">setup</span><span class="o">-</span><span class="n">loop</span><span class="o">&gt;&gt;</span>
            <span class="o">&lt;&lt;</span><span class="n">process</span><span class="o">-</span><span class="n">string</span><span class="o">&gt;&gt;</span>
            <span class="o">&lt;&lt;</span><span class="nb">print</span><span class="o">-</span><span class="n">data</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">end</span><span class="o">-</span><span class="n">main</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">argument</span><span class="o">-</span><span class="n">parser</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">serial</span><span class="o">-</span><span class="n">port</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">baud</span><span class="o">-</span><span class="n">rate</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">run</span><span class="o">-</span><span class="n">time</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">csv</span><span class="o">-</span><span class="n">data</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="k">return</span><span class="o">-</span><span class="n">arguments</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">executable</span><span class="o">-</span><span class="n">block</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">cleanup</span><span class="o">&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="imports">
<h2><a class="toc-backref" href="#id4">3 Imports</a><a class="headerlink" href="#imports" title="Permalink to this headline">¶</a></h2>
<p>The only real requirement is the <code class="docutils literal notranslate"><span class="pre">RFExplorer</span></code> module - which, despite the name is a <strong>module</strong> not a class.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># python standard library</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="c1"># from pypi</span>
<span class="kn">import</span> <span class="nn">RFExplorer</span>
</pre></div>
</div>
</div>
<div class="section" id="print-peak">
<h2><a class="toc-backref" href="#id5">4 Print Peak</a><a class="headerlink" href="#print-peak" title="Permalink to this headline">¶</a></h2>
<p>This is a helper function to get only the peak data from the sweep and print it to stdout.</p>
<div class="section" id="line-formats">
<h3><a class="toc-backref" href="#id6">4.1 Line Formats</a><a class="headerlink" href="#line-formats" title="Permalink to this headline">¶</a></h3>
<p>These are the output formats for each line.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CSV_LINE</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">,</span><span class="si">{1}</span><span class="s2">,</span><span class="si">{2}</span><span class="s2">,</span><span class="si">{3}</span><span class="s2">&quot;</span>
<span class="n">HUMAN_LINE</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">, Sweep[</span><span class="si">{1}</span><span class="s2">]: Peak: </span><span class="si">{2:.3f}</span><span class="s2"> MHz</span><span class="se">\t</span><span class="si">{3}</span><span class="s2"> dBm&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="the-function-declaration">
<h3><a class="toc-backref" href="#id7">4.2 The Function Declaration</a><a class="headerlink" href="#the-function-declaration" title="Permalink to this headline">¶</a></h3>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_peak</span><span class="p">(</span><span class="n">rf_explorer</span><span class="p">,</span> <span class="n">csv_data</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function prints the amplitude and frequency peak of the latest received sweep</span>

<span class="sd">    Args:</span>
<span class="sd">     rfe_explorer (`RFExplorer.RFECommunicator`): communicator to get data from</span>
<span class="sd">     csv_data (bool): if True, print as CSV output</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-the-data">
<h3><a class="toc-backref" href="#id8">4.3 Get The Data</a><a class="headerlink" href="#get-the-data" title="Permalink to this headline">¶</a></h3>
<p><em>This is part of the print_peak function,</em> it gets the current data-count from <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator.SweepData.Count</span></code>, decrements it to get the current index, then gets the data from <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator.SweepData.GetData</span></code>.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span> <span class="o">=</span> <span class="n">rf_explorer</span><span class="o">.</span><span class="n">SweepData</span><span class="o">.</span><span class="n">Count</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">sweep_data</span> <span class="o">=</span> <span class="n">rf_explorer</span><span class="o">.</span><span class="n">SweepData</span><span class="o">.</span><span class="n">GetData</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">sweep_data</span></code> is an instance of <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFESweepData.RFESweepData</span></code>.</p>
</div>
<div class="section" id="get-the-peak-data">
<h3><a class="toc-backref" href="#id9">4.4 Get The Peak Data</a><a class="headerlink" href="#get-the-peak-data" title="Permalink to this headline">¶</a></h3>
<p>In this case we aren’t printing all the data, just the peak.</p>
<div class="section" id="the-index">
<h4><a class="toc-backref" href="#id10">4.4.1 The Index</a><a class="headerlink" href="#the-index" title="Permalink to this headline">¶</a></h4>
<p>First we get the index of the step that had the highest value in the sweep and store it in the <code class="docutils literal notranslate"><span class="pre">peak_step</span></code> variable</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peak_step</span> <span class="o">=</span> <span class="n">sweep_data</span><span class="o">.</span><span class="n">GetPeakStep</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="the-amplitude">
<h4><a class="toc-backref" href="#id11">4.4.2 The Amplitude</a><a class="headerlink" href="#the-amplitude" title="Permalink to this headline">¶</a></h4>
<p>Next, we use the index stored in <code class="docutils literal notranslate"><span class="pre">peak_step</span></code> to get the amplitude that was recorded for that step.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peak_amplitude</span> <span class="o">=</span> <span class="n">sweep_data</span><span class="o">.</span><span class="n">GetAmplitude_DBM</span><span class="p">(</span><span class="n">peak_step</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="peak-frequency">
<h4><a class="toc-backref" href="#id12">4.4.3 Peak Frequency</a><a class="headerlink" href="#peak-frequency" title="Permalink to this headline">¶</a></h4>
<p>Now we get the frequency represented by the step - the one that had the greatest amplitude.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peak_frequency</span> <span class="o">=</span> <span class="n">sweep_data</span><span class="o">.</span><span class="n">GetFrequencyMHZ</span><span class="p">(</span><span class="n">peak_step</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="output">
<h4><a class="toc-backref" href="#id13">4.4.4 Output</a><a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h4>
<p>Finally, we combine the values and print them to the screen</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">line</span> <span class="o">=</span> <span class="n">CSV_LINE</span> <span class="k">if</span> <span class="n">csv_data</span> <span class="k">else</span> <span class="n">HUMAN_LINE</span>

<span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%c</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">index</span><span class="p">,</span> <span class="n">peak_frequency</span><span class="p">,</span>
                  <span class="n">peak_amplitude</span><span class="p">))</span>
<span class="k">return</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="communicator-exception">
<h2><a class="toc-backref" href="#id14">5 Communicator Exception</a><a class="headerlink" href="#communicator-exception" title="Permalink to this headline">¶</a></h2>
<p>This is an error to raise if something goes wrong.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CommunicatorException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The Communicator should raise this if something bad happens&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="the-communicator">
<h2><a class="toc-backref" href="#id15">6 The Communicator</a><a class="headerlink" href="#the-communicator" title="Permalink to this headline">¶</a></h2>
<p>This is a class to hold the rfe-object to take care of some common actions.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Communicator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;holds the communication object</span>

<span class="sd">    Args:</span>
<span class="sd">     serial_port (string|None): the name of the USB file</span>
<span class="sd">     baud_rate (int): the signaling rate for the serial connection</span>
<span class="sd">     settle_time (float): Seconds to wait after resetting</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serial_port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">baud_rate</span><span class="o">=</span><span class="mi">500000</span><span class="p">,</span> <span class="n">settle_time</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serial_port</span> <span class="o">=</span> <span class="n">serial_port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">baud_rate</span> <span class="o">=</span> <span class="n">baud_rate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settle_time</span> <span class="o">=</span> <span class="n">settle_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rf_explorer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span>
</pre></div>
</div>
<div class="section" id="the-rfe-instance">
<h3><a class="toc-backref" href="#id16">6.1 The RFE Instance</a><a class="headerlink" href="#the-rfe-instance" title="Permalink to this headline">¶</a></h3>
<p>This is the <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator</span></code> instance.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">rf_explorer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;RFE Communicator</span>

<span class="sd">    Returns:</span>
<span class="sd">     :py:class:`RFExplorer.RFECommunicator`: the communicator</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rf_explorer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rf_explorer</span> <span class="o">=</span> <span class="n">RFExplorer</span><span class="o">.</span><span class="n">RFECommunicator</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rf_explorer</span>
</pre></div>
</div>
</div>
<div class="section" id="context-management">
<h3><a class="toc-backref" href="#id17">6.2 Context Management</a><a class="headerlink" href="#context-management" title="Permalink to this headline">¶</a></h3>
<p>These are the methods that allow you to use this with a context manager. e.g. -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Communicator</span><span class="p">()</span> <span class="k">as</span> <span class="n">rfe</span><span class="p">:</span>
    <span class="n">rfe</span><span class="o">.</span><span class="n">set_up</span><span class="p">()</span>
</pre></div>
</div>
<p>When you leave the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement it will close the RFECommunicator for you.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;returns this object&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span>

<span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span>

<span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;closes the RFECommunicator&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Closes the RFECommunicator</span>

<span class="sd">    Side-Effect:</span>
<span class="sd">     calls `RFExplorer.RFECommunicator.Close` and removes the instance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rf_explorer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rf_explorer</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rf_explorer</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>
<div class="section" id="the-set-up-method">
<h3><a class="toc-backref" href="#id18">6.3 The <code class="docutils literal notranslate"><span class="pre">set_up</span></code> Method</a><a class="headerlink" href="#the-set-up-method" title="Permalink to this headline">¶</a></h3>
<p>This method runs the things that need to be done before doing a sweep of the spectrum.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">set_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets up the rf-explorer for scanning</span>

<span class="sd">    Raises:</span>
<span class="sd">     CommunicatorException: the setup failed</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<div class="section" id="get-the-ports">
<h4><a class="toc-backref" href="#id19">6.3.1 Get the ports</a><a class="headerlink" href="#get-the-ports" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator.GetConnectedPorts</span></code> will gather what it thinks are possible ports that the RF-Explorer might be attached to. As a side-effect it will print the ports it found to stdout.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># get candidate serial ports and print out what you discovered</span>
<span class="bp">self</span><span class="o">.</span><span class="n">rf_explorer</span><span class="o">.</span><span class="n">GetConnectedPorts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="connect-to-the-rfexplorer">
<h4><a class="toc-backref" href="#id20">6.3.2 Connect to the RFExplorer</a><a class="headerlink" href="#connect-to-the-rfexplorer" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator.ConnectPort</span></code> will try to connect to the RFExplorer. If <code class="docutils literal notranslate"><span class="pre">serial_port</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> then it will try each candidate port in order. On my desktop this currently fails (I think because it tries <code class="docutils literal notranslate"><span class="pre">/dev/ttyS4</span></code> first) so I have to pass in <code class="docutils literal notranslate"><span class="pre">/dev/ttyUSB0</span></code> explicitly to make it work.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#Connect to available port</span>
<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">rf_explorer</span><span class="o">.</span><span class="n">ConnectPort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serial_port</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">baud_rate</span><span class="p">)):</span>
    <span class="k">raise</span> <span class="n">CommunicatorException</span><span class="p">(</span><span class="s2">&quot;Unable to connect: port=</span><span class="si">{}</span><span class="s2">, baud=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serial_port</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">baud_rate</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="reset-the-device">
<h4><a class="toc-backref" href="#id21">6.3.3 Reset The Device</a><a class="headerlink" href="#reset-the-device" title="Permalink to this headline">¶</a></h4>
<p>This sends the reboot command (“r”) using <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator.SendCommand</span></code>, then waits forever for the <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator.IsResetEvent</span></code> attribute to change to False. Once the device indicates that it is out of the reset-state it sleeps for three seconds to let things settle down.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending the Reset Command&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">rf_explorer</span><span class="o">.</span><span class="n">SendCommand</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Waiting until the device resets&quot;</span><span class="p">)</span>
<span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rf_explorer</span><span class="o">.</span><span class="n">IsResetEvent</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Reset, sleeping for </span><span class="si">{}</span><span class="s2"> seconds to let the device settle&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">settle_time</span><span class="p">))</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settle_time</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="the-model-and-configuration">
<h4><a class="toc-backref" href="#id22">6.3.4 The Model And Configuration</a><a class="headerlink" href="#the-model-and-configuration" title="Permalink to this headline">¶</a></h4>
<p>Most of the methods you want to use assume that the configuration has been set up. This loop makes the request to set it up and then waits forever for the model to be set (waits for <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator.ActiveModel</span></code> to not equal <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFE_Common.eModel.MODEL_NONE</span></code>). The <code class="docutils literal notranslate"><span class="pre">RFExplorer</span></code> has to be prompted to process the information that the thread is reading off the serial port so in between checking if the model is set it calls <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator.ProcessReceivedString</span></code> to tell it to do so. Once the model is set, we can assume that we’re talking to the RF Explorer.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;requesting the RF Explorer configuration&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">rf_explorer</span><span class="o">.</span><span class="n">SendCommand_RequestConfigData</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Waiting for the model to not be None&quot;</span><span class="p">)</span>
<span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rf_explorer</span><span class="o">.</span><span class="n">ActiveModel</span> <span class="o">==</span> <span class="n">RFExplorer</span><span class="o">.</span><span class="n">RFE_Common</span><span class="o">.</span><span class="n">eModel</span><span class="o">.</span><span class="n">MODEL_NONE</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rf_explorer</span><span class="o">.</span><span class="n">ProcessReceivedString</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model is set&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="analyzer-check">
<h4><a class="toc-backref" href="#id23">6.3.5 Analyzer Check</a><a class="headerlink" href="#analyzer-check" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">RFExplorer</span></code> can talk to both spectrum analyzers and signal generators, but this code will only work with the spectrum analyzer, so use the <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator.IsAnalyzer</span></code> method to make sure that’s what this is</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#If object is an analyzer, we can scan for received sweeps</span>
<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">rf_explorer</span><span class="o">.</span><span class="n">IsAnalyzer</span><span class="p">()):</span>
    <span class="k">raise</span> <span class="n">CommunicatorError</span><span class="p">(</span><span class="s2">&quot;Error: Device connected is a Signal Generator. &quot;</span>
                            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Please, connect a Spectrum Analyzer&quot;</span><span class="p">)</span>
<span class="k">return</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-main-processing-loop">
<h2><a class="toc-backref" href="#id24">7 The Main processing loop</a><a class="headerlink" href="#the-main-processing-loop" title="Permalink to this headline">¶</a></h2>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">arguments</span><span class="p">,</span> <span class="n">communicator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Runs the example</span>

<span class="sd">    Args:</span>
<span class="sd">     arguments (argparse.Namespace): object with the settings</span>
<span class="sd">     communicator (Communicator): object with the RFECommunicator</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rf_explorer</span> <span class="o">=</span> <span class="n">communicator</span><span class="o">.</span><span class="n">rf_explorer</span>
    <span class="k">try</span><span class="p">:</span>
</pre></div>
</div>
<div class="section" id="setup-the-communicator">
<h3><a class="toc-backref" href="#id25">7.1 Setup the Communicator</a><a class="headerlink" href="#setup-the-communicator" title="Permalink to this headline">¶</a></h3>
<p>This tells the communicator to do the basic setup.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">communicator</span><span class="o">.</span><span class="n">set_up</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="setup-the-loop">
<h3><a class="toc-backref" href="#id26">7.2 Setup the Loop</a><a class="headerlink" href="#setup-the-loop" title="Permalink to this headline">¶</a></h3>
<p>The loop will run continually until we run out of time. This sets up the time variables as well as a <code class="docutils literal notranslate"><span class="pre">last_index</span></code> variable that will make sure that we only print the value if it has been updated.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Receiving data...&quot;</span><span class="p">)</span>
<span class="c1">#Process until we complete scan time</span>
<span class="n">last_index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">arguments</span><span class="o">.</span><span class="n">run_time</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">total</span>

<span class="k">if</span> <span class="n">arguments</span><span class="o">.</span><span class="n">csv_data</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;index,frequency (MHz), amplitude (dBm)&quot;</span><span class="p">)</span>
<span class="k">while</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">):</span>
</pre></div>
</div>
</div>
<div class="section" id="process-string">
<h3><a class="toc-backref" href="#id27">7.3 Process String</a><a class="headerlink" href="#process-string" title="Permalink to this headline">¶</a></h3>
<p>As before, the thread needs to be prompted to inspect the string it has pulled from the serial port.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#Process all received data from device</span>
<span class="n">rf_explorer</span><span class="o">.</span><span class="n">ProcessReceivedString</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="print-the-data">
<h3><a class="toc-backref" href="#id28">7.4 Print The Data</a><a class="headerlink" href="#print-the-data" title="Permalink to this headline">¶</a></h3>
<p>This checks the <code class="docutils literal notranslate"><span class="pre">RFExplorer.RFECommunicator.SweepData.Count</span></code> to see if it is new data and then, if it is, calls the <code class="docutils literal notranslate"><span class="pre">print_peak</span></code> function (defined above) to print the data to the screen and then updates the <code class="docutils literal notranslate"><span class="pre">last_index</span></code> that we printed.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#Print data if received new sweep only</span>
<span class="k">if</span> <span class="p">(</span><span class="n">rf_explorer</span><span class="o">.</span><span class="n">SweepData</span><span class="o">.</span><span class="n">Count</span> <span class="o">&gt;</span> <span class="n">last_index</span><span class="p">):</span>
    <span class="n">print_peak</span><span class="p">(</span><span class="n">rf_explorer</span><span class="p">,</span> <span class="n">arguments</span><span class="o">.</span><span class="n">csv_data</span><span class="p">)</span>
    <span class="n">last_index</span> <span class="o">=</span> <span class="n">rf_explorer</span><span class="o">.</span><span class="n">SweepData</span><span class="o">.</span><span class="n">Count</span>
</pre></div>
</div>
</div>
<div class="section" id="end-main">
<h3><a class="toc-backref" href="#id29">7.5 End Main</a><a class="headerlink" href="#end-main" title="Permalink to this headline">¶</a></h3>
<p>This is a leftover block to catch any exceptions that get raised.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
<span class="k">return</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-argument-parser">
<h2><a class="toc-backref" href="#id30">8 The Argument Parser</a><a class="headerlink" href="#the-argument-parser" title="Permalink to this headline">¶</a></h2>
<p>This creates the parser for the command-line arguments. It doesn’t parse the arguments because example-two uses it after adding more arguments.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">argument_parser</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Builds the argument parser</span>

<span class="sd">    Returns:</span>
<span class="sd">     ArgumentParser: object to parse the arguments</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="s2">&quot;RF Explorer Example One&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="serial-port">
<h3><a class="toc-backref" href="#id31">8.1 Serial Port</a><a class="headerlink" href="#serial-port" title="Permalink to this headline">¶</a></h3>
<p>If the `RFExplorer.RFECommunicator.ConnectPort` isn’t given a serial port it will try all the likely ports until it does or doesn’t connect. If this doesn’t work then pass in a specific port (e.g. <code class="docutils literal notranslate"><span class="pre">/dev/ttyUSB0</span></code>).</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s2">&quot;--serialport&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
    <span class="n">default</span><span class="o">=</span><span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Path to the serial-port file (e.g. &#39;/dev/ttyUSB0&#39;) - Default=</span><span class="si">%(default)s</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="baud-rate">
<h3><a class="toc-backref" href="#id32">8.2 Baud Rate</a><a class="headerlink" href="#baud-rate" title="Permalink to this headline">¶</a></h3>
<p>The baud-rate should be 500,000. Don’t change it unless you know something changed.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s2">&quot;--baud-rate&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">500000</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Baud-rate for the serial port (default=</span><span class="si">%(default)s</span><span class="s2">)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="run-time">
<h3><a class="toc-backref" href="#id33">8.3 Run-Time</a><a class="headerlink" href="#run-time" title="Permalink to this headline">¶</a></h3>
<p>This is the number of seconds to collect data before quitting.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s2">&quot;--run-time&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Seconds to collect data (default=</span><span class="si">%(default)s</span><span class="s2">)&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="csv-data">
<h3><a class="toc-backref" href="#id34">8.4 CSV Data</a><a class="headerlink" href="#csv-data" title="Permalink to this headline">¶</a></h3>
<p>This tells the code to print a CSV format instead of the usual (human-readable) format.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s2">&quot;--csv-data&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Output csv-formatted data&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="return-the-parser">
<h3><a class="toc-backref" href="#id35">8.5 Return The parser</a><a class="headerlink" href="#return-the-parser" title="Permalink to this headline">¶</a></h3>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">parser</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-executable-block">
<h2><a class="toc-backref" href="#id36">9 The Executable Block</a><a class="headerlink" href="#the-executable-block" title="Permalink to this headline">¶</a></h2>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argument_parser</span><span class="p">()</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">Communicator</span><span class="p">(</span><span class="n">arguments</span><span class="o">.</span><span class="n">serialport</span><span class="p">,</span> <span class="n">arguments</span><span class="o">.</span><span class="n">baud_rate</span><span class="p">)</span> <span class="k">as</span> <span class="n">communicator</span><span class="p">:</span>
        <span class="n">main</span><span class="p">(</span><span class="n">arguments</span><span class="p">,</span> <span class="n">communicator</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-output">
<h2><a class="toc-backref" href="#id37">10 Sample output</a><a class="headerlink" href="#sample-output" title="Permalink to this headline">¶</a></h2>
<div class="section" id="default">
<h3><a class="toc-backref" href="#id38">10.1 Default</a><a class="headerlink" href="#default" title="Permalink to this headline">¶</a></h3>
<p>This is an example of the default output.</p>
<p><strong>Warning:</strong> you have to be a member of the <code class="docutils literal notranslate"><span class="pre">dialout</span></code> group to have access to the serial port (which you need to run this).</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">example_1</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">argument_parser</span><span class="p">,</span>
    <span class="n">main</span><span class="p">,</span>
    <span class="n">Communicator</span><span class="p">,</span>
    <span class="p">)</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argument_parser</span><span class="p">()</span>
<span class="n">arguments</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s2">&quot;--run-time&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;--serialport&quot;</span><span class="p">,</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">])</span>
<span class="k">with</span> <span class="n">Communicator</span><span class="p">(</span><span class="n">arguments</span><span class="o">.</span><span class="n">serialport</span><span class="p">,</span> <span class="n">arguments</span><span class="o">.</span><span class="n">baud_rate</span><span class="p">)</span> <span class="k">as</span> <span class="n">communicator</span><span class="p">:</span>
    <span class="n">main</span><span class="p">(</span><span class="n">arguments</span><span class="p">,</span> <span class="n">communicator</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Detected</span> <span class="n">COM</span> <span class="n">ports</span><span class="p">:</span>
  <span class="o">*</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyS0</span>
  <span class="o">*</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB0</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyS0</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">available</span> <span class="n">port</span><span class="o">.</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB0</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">available</span> <span class="n">port</span><span class="o">.</span>
<span class="n">RF</span> <span class="n">Explorer</span> <span class="n">Valid</span> <span class="n">Ports</span> <span class="n">found</span><span class="p">:</span> <span class="mi">2</span> <span class="o">-</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyS0</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB0</span>
<span class="n">User</span> <span class="n">COM</span> <span class="n">port</span><span class="p">:</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB0</span>
<span class="n">Connected</span><span class="p">:</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB0</span><span class="p">,</span> <span class="mi">500000</span> <span class="n">bauds</span>
<span class="n">Sending</span> <span class="n">the</span> <span class="n">Reset</span> <span class="n">Command</span>
<span class="n">Waiting</span> <span class="n">until</span> <span class="n">the</span> <span class="n">device</span> <span class="n">resets</span>
<span class="n">Reset</span><span class="p">,</span> <span class="n">sleeping</span> <span class="k">for</span> <span class="mi">3</span> <span class="n">seconds</span> <span class="n">to</span> <span class="n">let</span> <span class="n">the</span> <span class="n">device</span> <span class="n">settle</span>
<span class="n">requesting</span> <span class="n">the</span> <span class="n">RF</span> <span class="n">Explorer</span> <span class="n">configuration</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">the</span> <span class="n">model</span> <span class="n">to</span> <span class="ow">not</span> <span class="n">be</span> <span class="kc">None</span>
<span class="n">Received</span> <span class="n">RF</span> <span class="n">Explorer</span> <span class="n">device</span> <span class="n">model</span> <span class="n">info</span><span class="p">:</span><span class="c1">#C2-M:004,255,01.11</span>
<span class="n">New</span> <span class="n">Freq</span> <span class="nb">range</span> <span class="o">-</span> <span class="n">buffer</span> <span class="n">cleared</span><span class="o">.</span>

<span class="n">RF</span> <span class="n">Explorer</span> <span class="mi">23</span><span class="o">-</span><span class="n">Apr</span><span class="o">-</span><span class="mi">13</span> <span class="mf">01.04</span><span class="o">.</span><span class="mi">05</span> <span class="mf">01.11</span>
<span class="n">Model</span> <span class="ow">is</span> <span class="nb">set</span>
<span class="n">Receiving</span> <span class="n">data</span><span class="o">...</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">15</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2407.000</span> <span class="n">MHz</span>      <span class="o">-</span><span class="mf">55.5</span> <span class="n">dBm</span>
<span class="n">Received</span> <span class="n">RF</span> <span class="n">Explorer</span> <span class="n">device</span> <span class="n">model</span> <span class="n">info</span><span class="p">:</span><span class="c1">#C2-M:004,255,01.11</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">16</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2465.750</span> <span class="n">MHz</span>      <span class="o">-</span><span class="mf">94.0</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">16</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2445.125</span> <span class="n">MHz</span>      <span class="o">-</span><span class="mf">94.5</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">16</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2455.125</span> <span class="n">MHz</span>      <span class="o">-</span><span class="mf">93.0</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">16</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2458.875</span> <span class="n">MHz</span>      <span class="o">-</span><span class="mf">91.5</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">16</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2470.125</span> <span class="n">MHz</span>      <span class="o">-</span><span class="mf">88.0</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">16</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2402.000</span> <span class="n">MHz</span>      <span class="o">-</span><span class="mf">92.5</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">16</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2463.875</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">89.5</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">17</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2463.250</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">87.5</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">17</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2463.250</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">86.0</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">17</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2463.250</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">88.0</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">17</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2461.375</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">83.5</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">17</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2460.750</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">82.5</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">17</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2460.750</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">81.5</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">17</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2460.125</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">80.0</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">17</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2458.250</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">82.0</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">17</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">19</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2458.875</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">81.5</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">17</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">20</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2467.625</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">81.5</span> <span class="n">dBm</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">18</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">Sweep</span><span class="p">[</span><span class="mi">21</span><span class="p">]:</span> <span class="n">Peak</span><span class="p">:</span> <span class="mf">2468.875</span> <span class="n">MHz</span>     <span class="o">-</span><span class="mf">83.0</span> <span class="n">dBm</span>
<span class="n">Disconnected</span><span class="o">.</span>
</pre></div>
</div>
<p>There are two things to notice:</p>
<ol class="arabic simple">
<li>There doesn’t appear to have been much activity.</li>
<li>The three second cutoff didn’t grab all the samples for the final second.</li>
</ol>
<p>It looks like the three seconds is an absolute value, so even thought it shows 18:00:16 as the start, it probably started at some point within that second and ended at the start of the 18:00:18 second. So if you try and aggregate things into seconds , you’ll have to take that into consideration - maybe trim off the ends.</p>
</div>
<div class="section" id="csv">
<h3><a class="toc-backref" href="#id39">10.2 CSV</a><a class="headerlink" href="#csv" title="Permalink to this headline">¶</a></h3>
<p>Here’s the version where I try to create a comma-separated output.</p>
<div class="code ipython highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arguments</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s2">&quot;--run-time&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;--csv-data&quot;</span><span class="p">,</span> <span class="s2">&quot;--serialport&quot;</span><span class="p">,</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">])</span>
<span class="k">with</span> <span class="n">Communicator</span><span class="p">(</span><span class="n">arguments</span><span class="o">.</span><span class="n">serialport</span><span class="p">,</span> <span class="n">arguments</span><span class="o">.</span><span class="n">baud_rate</span><span class="p">)</span> <span class="k">as</span> <span class="n">communicator</span><span class="p">:</span>
    <span class="n">main</span><span class="p">(</span><span class="n">arguments</span><span class="p">,</span> <span class="n">communicator</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Detected</span> <span class="n">COM</span> <span class="n">ports</span><span class="p">:</span>
  <span class="o">*</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyS0</span>
  <span class="o">*</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB0</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyS0</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">available</span> <span class="n">port</span><span class="o">.</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB0</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">available</span> <span class="n">port</span><span class="o">.</span>
<span class="n">RF</span> <span class="n">Explorer</span> <span class="n">Valid</span> <span class="n">Ports</span> <span class="n">found</span><span class="p">:</span> <span class="mi">2</span> <span class="o">-</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyS0</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB0</span>
<span class="n">User</span> <span class="n">COM</span> <span class="n">port</span><span class="p">:</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB0</span>
<span class="n">Connected</span><span class="p">:</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB0</span><span class="p">,</span> <span class="mi">500000</span> <span class="n">bauds</span>
<span class="n">Sending</span> <span class="n">the</span> <span class="n">Reset</span> <span class="n">Command</span>
<span class="n">Waiting</span> <span class="n">until</span> <span class="n">the</span> <span class="n">device</span> <span class="n">resets</span>
<span class="n">Reset</span><span class="p">,</span> <span class="n">sleeping</span> <span class="k">for</span> <span class="mi">3</span> <span class="n">seconds</span> <span class="n">to</span> <span class="n">let</span> <span class="n">the</span> <span class="n">device</span> <span class="n">settle</span>
<span class="n">requesting</span> <span class="n">the</span> <span class="n">RF</span> <span class="n">Explorer</span> <span class="n">configuration</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">the</span> <span class="n">model</span> <span class="n">to</span> <span class="ow">not</span> <span class="n">be</span> <span class="kc">None</span>
<span class="n">Received</span> <span class="n">RF</span> <span class="n">Explorer</span> <span class="n">device</span> <span class="n">model</span> <span class="n">info</span><span class="p">:</span><span class="c1">#C2-M:004,255,01.11</span>
<span class="n">New</span> <span class="n">Freq</span> <span class="nb">range</span> <span class="o">-</span> <span class="n">buffer</span> <span class="n">cleared</span><span class="o">.</span>

<span class="n">RF</span> <span class="n">Explorer</span> <span class="mi">23</span><span class="o">-</span><span class="n">Apr</span><span class="o">-</span><span class="mi">13</span> <span class="mf">01.04</span><span class="o">.</span><span class="mi">05</span> <span class="mf">01.11</span>
<span class="n">Model</span> <span class="ow">is</span> <span class="nb">set</span>
<span class="n">Receiving</span> <span class="n">data</span><span class="o">...</span>
<span class="n">index</span><span class="p">,</span><span class="n">frequency</span> <span class="p">(</span><span class="n">MHz</span><span class="p">),</span> <span class="n">amplitude</span> <span class="p">(</span><span class="n">dBm</span><span class="p">)</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">44</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">2428.25</span><span class="p">,</span><span class="o">-</span><span class="mf">94.5</span>
<span class="n">Received</span> <span class="n">RF</span> <span class="n">Explorer</span> <span class="n">device</span> <span class="n">model</span> <span class="n">info</span><span class="p">:</span><span class="c1">#C2-M:004,255,01.11</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">45</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mf">2407.625</span><span class="p">,</span><span class="o">-</span><span class="mf">93.5</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">45</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mf">2418.25</span><span class="p">,</span><span class="o">-</span><span class="mf">90.0</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">45</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mf">2468.25</span><span class="p">,</span><span class="o">-</span><span class="mf">81.0</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">45</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mf">2467.625</span><span class="p">,</span><span class="o">-</span><span class="mf">81.0</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">45</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mf">2416.375</span><span class="p">,</span><span class="o">-</span><span class="mf">86.0</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">46</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mf">2415.75</span><span class="p">,</span><span class="o">-</span><span class="mf">80.5</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">46</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mf">2415.75</span><span class="p">,</span><span class="o">-</span><span class="mf">79.0</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">46</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">2415.75</span><span class="p">,</span><span class="o">-</span><span class="mf">79.5</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">46</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mf">2414.5</span><span class="p">,</span><span class="o">-</span><span class="mf">79.5</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">46</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mf">2413.875</span><span class="p">,</span><span class="o">-</span><span class="mf">78.5</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">46</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mf">2413.875</span><span class="p">,</span><span class="o">-</span><span class="mf">79.0</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">46</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mf">2415.125</span><span class="p">,</span><span class="o">-</span><span class="mf">76.5</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">46</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mf">2413.25</span><span class="p">,</span><span class="o">-</span><span class="mf">75.5</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">46</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mf">2413.25</span><span class="p">,</span><span class="o">-</span><span class="mf">75.5</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">46</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mf">2412.625</span><span class="p">,</span><span class="o">-</span><span class="mf">76.5</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">47</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mf">2412.625</span><span class="p">,</span><span class="o">-</span><span class="mf">76.0</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">47</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mf">2412.625</span><span class="p">,</span><span class="o">-</span><span class="mf">74.0</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">47</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mf">2410.75</span><span class="p">,</span><span class="o">-</span><span class="mf">75.5</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">47</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mf">2411.375</span><span class="p">,</span><span class="o">-</span><span class="mf">77.0</span>
<span class="n">Sun</span> <span class="n">Feb</span> <span class="mi">18</span> <span class="mi">18</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">47</span> <span class="mi">2018</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mf">2410.125</span><span class="p">,</span><span class="o">-</span><span class="mf">75.5</span>
<span class="n">Disconnected</span><span class="o">.</span>
</pre></div>
</div>
<p>The values are a little higher, so maybe there was more going on.</p>
</div>
</div>
</div>


      </div>
        
    </div>
  </div>
  <footer class="footer navbar-fixed-bottom">
    <div class="container" style="text-align:center">
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding: 10px" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
    </div>
  </footer>

  </body>
</html>